{
  "sim_id": "st_al_instance_001",
  "environment": {
    "id": "ST_AL_ENV",
    "class": "base.Environment",
    "attributes": { "task": "active_learning_ticket_triage", "domain": "customer_support" }
  },
  "agents": [
    { "id": "ORCH", "class": "base.Agent", "model": "system",
      "affordances": ["create_al_instance", "request_batch", "request_prediction", "model_checkpoint"] },
    { "id": "AL", "class": "base.Agent", "model": "ai",
      "affordances": ["select_batch"] },
    { "id": "LAB", "class": "base.Agent", "model": "human",
      "affordances": ["confirm_label", "override_label"] },
    { "id": "MOD", "class": "base.Agent", "model": "ai",
      "affordances": ["train", "predict", "evaluate"] },
    { "id": "XAI", "class": "base.Agent", "model": "ai",
      "affordances": ["lime", "similar_tickets"] }
  ],
  "objects": [
    { "id": "Ticket", "class": "base.Object",
      "attributes": {"kind":"support_ticket"},
      "affordances": ["label"] },
    { "id": "Pool", "class": "base.Object",
      "attributes": {"kind":"unlabeled_pool"},
      "affordances": ["snapshot", "update"] },
    { "id": "Sel", "class": "base.Object",
      "attributes": {"kind":"selection_batch"},
      "affordances": ["create"] },
    { "id": "Mdl", "class": "base.Object",
      "attributes": {"kind":"model"},
      "affordances": ["checkpoint"] }
  ],
  "script": [
    { "t": 0.0, "agent": "ORCH", "action": "create_al_instance", "object": "Pool",
      "effect": {"instance_id": "AL_001", "pool_size": 5000, "embedding_model": "all-MiniLM-L6-v2"}, "latency_ms": 450 },
    { "t": 1.0, "agent": "ORCH", "action": "request_batch", "object": "Pool",
      "effect": {"batch_size": 5, "strategy": "entropy"}, "latency_ms": 50 },
    { "t": 1.2, "agent": "AL", "action": "select_batch", "object": "Sel",
      "effect": {"batch_id": "BATCH_001", "ids": ["T001","T002","T003","T004","T005"], "uncertainties": [0.92,0.89,0.87,0.86,0.85]}, "latency_ms": 120 },
    { "t": 2.0, "agent": "MOD", "action": "predict", "object": "Sel",
      "effect": {"predictions": ["billing","tech","tech","other","billing"]}, "latency_ms": 340 },
    { "t": 2.5, "agent": "XAI", "action": "lime", "object": "Sel",
      "effect": {"batch_id": "BATCH_001", "explanations": [{"ticket_id": "T001", "top_features": ["payment", "invoice", "charge"], "weights": [0.45, 0.32, 0.21]}, {"ticket_id": "T002", "top_features": ["error", "login", "reset"], "weights": [0.52, 0.28, 0.20]}, {"ticket_id": "T003", "top_features": ["server", "down", "access"], "weights": [0.48, 0.35, 0.17]}, {"ticket_id": "T004", "top_features": ["cancel", "refund", "subscription"], "weights": [0.41, 0.38, 0.21]}, {"ticket_id": "T005", "top_features": ["charge", "subscription", "billing"], "weights": [0.50, 0.31, 0.19]}]}, "latency_ms": 820 },
    { "t": 3.0, "agent": "XAI", "action": "similar_tickets", "object": "Sel",
      "effect": {"batch_id": "BATCH_001", "similar": [{"ticket_id": "T001", "similar_ids": ["T_hist_342", "T_hist_891", "T_hist_127"], "similarities": [0.94, 0.91, 0.88]}, {"ticket_id": "T002", "similar_ids": ["T_hist_501", "T_hist_664", "T_hist_803"], "similarities": [0.92, 0.89, 0.86]}, {"ticket_id": "T003", "similar_ids": ["T_hist_215", "T_hist_428", "T_hist_731"], "similarities": [0.95, 0.93, 0.90]}, {"ticket_id": "T004", "similar_ids": ["T_hist_112", "T_hist_556", "T_hist_889"], "similarities": [0.88, 0.85, 0.82]}, {"ticket_id": "T005", "similar_ids": ["T_hist_334", "T_hist_667", "T_hist_921"], "similarities": [0.91, 0.88, 0.85]}]}, "latency_ms": 450 },
    { "t": 5.0, "agent": "LAB", "action": "confirm_label", "object": "Ticket",
      "effect": {"ticket_id": "T001", "confirmed_label": "billing"}, "duration_s": 35 },
    { "t": 8.0, "agent": "LAB", "action": "override_label", "object": "Ticket",
      "effect": {"ticket_id": "T002", "original_prediction": "tech", "new_label": "billing"}, "duration_s": 42 },
    { "t": 11.0, "agent": "LAB", "action": "confirm_label", "object": "Ticket",
      "effect": {"ticket_id": "T003", "confirmed_label": "tech"}, "duration_s": 28 },
    { "t": 14.0, "agent": "LAB", "action": "override_label", "object": "Ticket",
      "effect": {"ticket_id": "T004", "original_prediction": "other", "new_label": "tech"}, "duration_s": 48 },
    { "t": 17.0, "agent": "LAB", "action": "confirm_label", "object": "Ticket",
      "effect": {"ticket_id": "T005", "confirmed_label": "billing"}, "duration_s": 30 },
    { "t": 17.0, "agent": "MOD", "action": "train", "object": "Mdl",
      "effect": {"added_samples": 5, "total_samples": 167, "epochs": 3}, "latency_ms": 18600 },
    { "t": 35.6, "agent": "MOD", "action": "evaluate", "object": "Mdl",
      "effect": {"metrics": {"f1_macro": 0.83, "accuracy": 0.86, "auroc": 0.89}}, "latency_ms": 750 },
    { "t": 36.4, "agent": "ORCH", "action": "model_checkpoint", "object": "Mdl",
      "effect": {"checkpoint_id": "checkpoint-167", "version": "v1.2.1"}, "latency_ms": 420 },
    { "t": 40.0, "agent": "ORCH", "action": "request_prediction", "object": "Ticket",
      "effect": {"ticket_id": "T_new_001", "text": "Cannot access my account after password reset"}, "latency_ms": 25 },
    { "t": 40.1, "agent": "MOD", "action": "predict", "object": "Ticket",
      "effect": {"ticket_id": "T_new_001", "prediction": "tech", "confidence": 0.91}, "latency_ms": 85 }
  ]
}
